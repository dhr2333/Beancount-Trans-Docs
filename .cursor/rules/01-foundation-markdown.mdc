---
globs: *.md
description: 基础层 - Markdown 格式规范
---

# 基础层：Markdown 格式规范

## Markdown 语法规范

### 标题层级

- **必须从 H2（##）开始**：文档的第一级标题使用 `##`，不使用 `#`（H1 由 Docusaurus 自动生成）
- **标题层级递增**：按 `##` → `###` → `####` 顺序使用，不要跳级
- **标题后空行**：标题前后各保留一个空行

```markdown
## 一、总览：它是如何工作的？

这是正文内容。

### 1. 账本 (Ledger)

这是子章节内容。
```

### 列表规范

- **有序列表**：使用数字编号，如 `1.`、`2.`、`3.`
- **无序列表**：使用 `-`，项目内统一使用一种符号，不要使用 `*`
- **列表缩进**：嵌套列表使用 2 个空格缩进
- **列表后空行**：列表前后各保留一个空行

```markdown
## 核心功能

Beancount-Trans 提供以下功能：

1. **解析翻译**：将账单翻译成专业记账软件能懂的语言
2. **智能分类**：自动判断消费类型
3. **生成报表**：生成可视化财务报表

### 支持的平台

- 支付宝
- 微信支付
- 银行账单
```

### 代码块规范

- **语言标识**：必须为代码块指定语言标识，如 `shell`、`python`、`typescript`、`mermaid` 等
- **Mermaid 图表**：使用 `mermaid` 语言标识，参考 [docs/02-用户指南/01-核心概念.md](mdc:docs/02-用户指南/01-核心概念.md)
- **代码块前后空行**：代码块前后各保留一个空行

```markdown
安装 Beancount 使用以下命令：

```shell
pip install beancount fava
fava example.bean
```

流程图示例：

```mermaid
flowchart TD
A[上传账单] --> B[解析翻译]
B --> C[生成账本]
```

### 链接规范

- **内部链接**：**必须使用完整 URL**，以确保在 Obsidian 和 Docusaurus 中都能正常工作
- **外部链接**：使用完整 URL，并明确标注为外部链接
- **链接文本**：使用描述性文本，避免使用"点击这里"等模糊表述

**重要**：由于文档在 Obsidian 中编写后推送到 Docusaurus 构建，相对路径 `.md` 文件链接在 Docusaurus 中无法正确工作（因为 Docusaurus 使用 `slug` 而非文件名生成 URL）。

```markdown
// ✅ 正确：完整 URL（内部文档链接）
详细说明请参阅 [账户管理文档](https://trans.dhr2333.cn/docs/用户指南/account)
更多信息请查看 [核心概念](https://trans.dhr2333.cn/docs/用户指南/core-concepts)

// ✅ 正确：完整 URL（外部链接）
访问 [Beancount-Trans 控制台](https://trans.dhr2333.cn/login)

// ❌ 错误：相对路径 .md 文件链接（在 Docusaurus 中无法工作）
更多信息请查看 [核心概念](./01-核心概念.md)

// ❌ 错误：模糊的链接文本
点击[这里](https://example.com)了解更多
```

### 强调和引用

- **粗体**：使用 `**文本**` 强调重要内容
- **斜体**：使用 `*文本*` 表示次要强调
- **引用块**：使用 `>` 表示引用或提示信息
- **引用块嵌套**：使用 `>>` 表示嵌套引用

```markdown
**重要提示**：上传文件前请确保文件格式正确。

> **前提条件**：您需要使用手机号来注册账户。公有云服务无需任何安装。

> **A:** 映射规则是在**解析账单时**应用的。
> > 对于已解析的数据，您需要重新解析原账单文件。
```

## 中文写作规范

### 标点符号

- **中文标点**：使用中文标点符号（，。；：！？）
- **英文标点**：代码、URL、技术术语中的英文标点保持原样
- **中英文混排**：中文和英文、数字之间需要添加空格

```markdown
// ✅ 正确：中英文之间添加空格
Beancount-Trans 是一个专业的复式记账工具。

// ✅ 正确：数字和中文之间添加空格
支持 100 多种账户类型。

// ❌ 错误：缺少空格
Beancount-Trans是一个专业的复式记账工具。
```

### 术语统一

- **项目名称**：统一使用 `Beancount-Trans`（注意大小写和连字符）
- **技术术语**：保持术语一致性，如"账本"、"映射"、"解析"等
- **账户命名**：使用英文账户名，如 `Expenses:Food`、`Assets:Alipay`

```markdown
// ✅ 正确：术语统一
Beancount-Trans 支持将账单解析为 Beancount 格式的账本文件。

// ❌ 错误：术语不一致
Beancount-Trans 支持将账单翻译为 Beancount 格式的账本文件。
```

### 数字和单位

- **数字格式**：中文文档中使用阿拉伯数字，如 `100`、`3.14`
- **单位使用**：单位与数字之间添加空格，如 `100 MB`、`3.5 GB`

```markdown
// ✅ 正确
文件大小限制为 100 MB。

// ❌ 错误
文件大小限制为100MB。
```

## Mermaid 图表规范

### 图表类型

- **流程图**：使用 `flowchart` 类型
- **时序图**：使用 `sequenceDiagram`
- **类图**：使用 `classDiagram`
- **状态图**：使用 `stateDiagram-v2`

### 流程图示例

参考现有文档中的 Mermaid 图表：[docs/02-用户指南/01-核心概念.md](mdc:docs/02-用户指南/01-核心概念.md) 和 [docs/02-用户指南/02-账户.md](mdc:docs/02-用户指南/02-账户.md)

```markdown
```mermaid
flowchart TD
A[📄 上传原始账单文件] --> B(🔄 Beancount-Trans 核心引擎)
B --> C[解析翻译]
B --> D[智能分类]
C --> E[📒 生成专业账本]
D --> E
E --> F[📊 查看可视化财务报表]
```

### 图表最佳实践

- **节点标签**：使用清晰的中文标签，必要时添加 emoji 增强可读性
- **图表复杂度**：保持图表简洁，避免过多节点和连接
- **方向选择**：优先使用 `TD`（从上到下）或 `LR`（从左到右）

## 图片和资源引用

### 图片引用规范

- **静态资源**：图片放在 `static/img/` 目录下
- **引用路径**：使用相对路径或绝对路径（从 `static/` 开始）
- **图片描述**：必须为图片添加 alt 文本

```markdown
// ✅ 正确：使用相对路径
![Beancount-Trans Logo](/img/beancount-trans-logo.svg)

// ✅ 正确：使用外部 URL（如 OSS）
![演示视频](https://daihaorui.oss-cn-hangzhou.aliyuncs.com/djangoblog/202508191544942.gif)
```

### 资源文件组织

- **图片文件**：统一放在 `static/img/` 目录
- **文件命名**：使用小写字母、连字符和数字，如 `beancount-trans-logo.svg`

## 表格规范

### 表格格式

- **对齐方式**：使用 `:---:`（居中）、`:---`（左对齐）、`---:`（右对齐）
- **表头**：必须包含表头行
- **表格前后空行**：表格前后各保留一个空行

```markdown
| 问题                            | 解答                                                                 |
| :---------------------------- | :------------------------------------------------------------------ |
| **Q: Beancount-Trans 是免费的吗？** | A: 是的！Beancount-Trans 是一个完全开源的项目。 |
| **Q: 我的财务数据安全吗？**             | A: 安全性是我们的首要考虑。 |
```

参考现有表格示例：[docs/05-FAQs.md](mdc:docs/05-FAQs.md)

## 特殊格式

### 行内代码

- **技术术语**：使用反引号包裹技术术语、命令、文件名等
- **代码片段**：短代码片段使用行内代码格式

```markdown
使用 `beancount` 命令可以验证账本文件。

账户名称格式为 `Expenses:Food`。
```

### 任务列表

- **复选框**：使用 `- [ ]` 表示未完成任务，`- [x]` 表示已完成任务

```markdown
## 待办事项

- [x] 完成文档编写
- [ ] 添加示例代码
- [ ] 更新 FAQ
```

## 文档结构建议

### 章节组织

- **总览章节**：使用"一、二、三"等中文数字作为一级标题
- **子章节**：使用"1. 2. 3."等数字作为二级标题
- **小节**：使用"###"作为三级标题

```markdown
## 一、总览：它是如何工作的？

### 1. 账本 (Ledger)

#### 账本的作用

这是详细说明。
```

### 段落规范

- **段落长度**：保持段落简洁，每段 3-5 句话
- **段落间空行**：段落之间保留一个空行
- **列表后段落**：列表后添加总结性段落
